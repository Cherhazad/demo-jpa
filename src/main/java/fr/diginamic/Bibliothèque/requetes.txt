CREATE TABLE LIVRE (
    ID_LIVRE INT PRIMARY KEY,
    TITRE VARCHAR(50),
    AUTEUR VARCHAR(50)
);

CREATE TABLE CLIENT (
    ID_CLIENT INT PRIMARY KEY,
    NOM VARCHAR(50),
    PRENOM VARCHAR(50)
);

CREATE TABLE EMPRUNT (
    ID_EMPRUNT INT PRIMARY KEY,
    DATE_DEBUT DATE,
    DELAI INT,
    DATE_FIN DATE
);

ALTER TABLE EMPRUNT CHANGE ID_EMPRUNT ID INT
ALTER TABLE LIVRE CHANGE ID_LIVRE ID INT
ALTER TABLE CLIENT CHANGE ID_CLIENT ID INT

ALTER TABLE EMPRUNT ADD ID_CLIENT INT


ALTER TABLE EMPRUNT ADD CONSTRAINT FK_EMPRUNT_1 FOREIGN KEY (ID_CLIENT) REFERENCES CLIENT(ID);

CREATE TABLE COMPO (
    ID INT,
    ID_LIV INT,
    ID_EMP INT
    );

ALTER TABLE COMPO ADD CONSTRAINT FK_COMPO_1 FOREIGN KEY (ID_LIV) REFERENCES LIVRE(ID);
ALTER TABLE COMPO ADD CONSTRAINT FK_COMPO_2 FOREIGN KEY (ID_EMP) REFERENCES EMPRUNT(ID);


// REQUÊTES TP MODIFIÉES
insert into CLIENT (ID, NOM, PRENOM) VALUES (1, 'Brigand', 'Pierre');
insert into CLIENT (ID, NOM, PRENOM) VALUES (2,'YU', 'Cheng');
insert into CLIENT (ID, NOM, PRENOM) VALUES (3,'BERRAD', 'Hicham');

insert into EMPRUNT VALUES (1, '2017-11-12', 15, '2017-11-18', 1);
insert into EMPRUNT VALUES (2, '2017-12-08', 30,'2017-12-23', 2);
insert into EMPRUNT VALUES (3, '2017-12-09', 30,'2018-01-04', 3);
insert into EMPRUNT VALUES (4, '2018-01-03', 21, NULL, 1);
insert into EMPRUNT VALUES (5, '2018-01-13', 21, NULL, 3);

insert into COMPO VALUES (1, 1, 1);
insert into COMPO VALUES (2, 4, 1);
insert into COMPO VALUES (3, 2, 2);
insert into COMPO VALUES (4, 3, 2);
insert into COMPO VALUES (5, 1, 3);
insert into COMPO VALUES (6, 5, 4);
insert into COMPO VALUES (7, 2, 4);
insert into COMPO VALUES (8, 3, 5);
